# Dockerfile for client project

# Base image
FROM node:lts-alpine

# Set working directory
WORKDIR /app

COPY package.json ./
COPY yarn.lock ./

# Installs all node packages
# RUN npm ci 
RUN npm install yarn --global --force
RUN yarn install --immutable --immutable-cache --check-cache

# Copies everything over to Docker environment
COPY . ./
RUN yarn install --immutable
# RUN npm run build
RUN yarn client:build

# Expose port
EXPOSE 80
